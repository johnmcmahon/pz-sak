/**
 Copyright 2016, RadiantBlue Technologies, Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

'use strict';

describe('Controller: WmsController', function () {

    var $httpBackend,
        capabilitiesHandler,
        describeFeatureHandler,
        getFeatureHandler,
        manualWfsHandler,
        loginHandler;
        // $cookies;

    // load the controller's module
    beforeEach(module('SAKapp'));

    var WmsController,
        scope;

    // Initialize the controller and a mock scope
    beforeEach(inject(function ($controller, $rootScope, $injector) {
        scope = $rootScope.$new();
        $httpBackend = $injector.get('$httpBackend');
        capabilitiesHandler = $httpBackend.when(
            'GET',
            '/uproxy/geoserver.piazzageo.io/geoserver/ows?service=WFS&version=1.1.0&request=GetCapabilities'
        ).respond(
        '<?xml version="1.0" encoding="UTF-8"?><wfs:WFS_Capabilities version="1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wfs http://demo.boundlessgeo.com:80/geoserver/schemas/wfs/1.1.0/wfs.xsd" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:nasa="http://nasa.gov" xmlns:maps="http://boundlessgeo.com" xmlns:topp="http://www.openplans.org/topp" xmlns:ne="http://naturalearthdata.com" xmlns:osm="http://openstreemap.org" xmlns:nurc="http://www.nurc.nato.int" xmlns:og="http://opengeo.org" xmlns:usgs="http://www.usgs.gov/" updateSequence="164"><ows:ServiceIdentification><ows:Title>OpenGeo Demo Web Feature Service</ows:Title><ows:Abstract/><ows:Keywords><ows:Keyword>wfs</ows:Keyword><ows:Keyword>geoserver</ows:Keyword></ows:Keywords><ows:ServiceType>WFS</ows:ServiceType><ows:ServiceTypeVersion>1.1.0</ows:ServiceTypeVersion><ows:Fees>NONE</ows:Fees><ows:AccessConstraints>NONE</ows:AccessConstraints></ows:ServiceIdentification><ows:ServiceProvider><ows:ProviderName/><ows:ServiceContact><ows:IndividualName/><ows:PositionName/><ows:ContactInfo><ows:Phone><ows:Voice/><ows:Facsimile/></ows:Phone><ows:Address><ows:City/><ows:AdministrativeArea/><ows:PostalCode/><ows:Country/></ows:Address></ows:ContactInfo></ows:ServiceContact></ows:ServiceProvider><ows:OperationsMetadata><ows:Operation name="GetCapabilities"><ows:DCP><ows:HTTP><ows:Get xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/><ows:Post xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/></ows:HTTP></ows:DCP><ows:Parameter name="AcceptVersions"><ows:Value>1.0.0</ows:Value><ows:Value>1.1.0</ows:Value></ows:Parameter><ows:Parameter name="AcceptFormats"><ows:Value>text/xml</ows:Value></ows:Parameter></ows:Operation><ows:Operation name="DescribeFeatureType"><ows:DCP><ows:HTTP><ows:Get xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/><ows:Post xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/></ows:HTTP></ows:DCP><ows:Parameter name="outputFormat"><ows:Value>text/xml; subtype=gml/3.1.1</ows:Value></ows:Parameter></ows:Operation><ows:Operation name="GetFeature"><ows:DCP><ows:HTTP><ows:Get xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/><ows:Post xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/></ows:HTTP></ows:DCP><ows:Parameter name="resultType"><ows:Value>results</ows:Value><ows:Value>hits</ows:Value></ows:Parameter><ows:Parameter name="outputFormat"><ows:Value>text/xml; subtype=gml/3.1.1</ows:Value><ows:Value>GML2</ows:Value><ows:Value>KML</ows:Value><ows:Value>SHAPE-ZIP</ows:Value><ows:Value>application/gml+xml; version=3.2</ows:Value><ows:Value>application/json</ows:Value><ows:Value>application/vnd.google-earth.kml xml</ows:Value><ows:Value>application/vnd.google-earth.kml+xml</ows:Value><ows:Value>csv</ows:Value><ows:Value>gml3</ows:Value><ows:Value>gml32</ows:Value><ows:Value>json</ows:Value><ows:Value>text/javascript</ows:Value><ows:Value>text/xml; subtype=gml/2.1.2</ows:Value><ows:Value>text/xml; subtype=gml/3.2</ows:Value></ows:Parameter><ows:Constraint name="LocalTraverseXLinkScope"><ows:Value>2</ows:Value></ows:Constraint></ows:Operation><ows:Operation name="GetGmlObject"><ows:DCP><ows:HTTP><ows:Get xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/><ows:Post xlink:href="http://demo.boundlessgeo.com:80/geoserver/wfs"/></ows:HTTP></ows:DCP></ows:Operation></ows:OperationsMetadata><FeatureTypeList><Operations><Operation>Query</Operation></Operations><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:polygon_barrier</Name><Title>Barriers</Title><Abstract>On the ground physical structures that block or impede movement.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>polygon_barrier</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-124.66748064067293 20.61225714794159</ows:LowerCorner><ows:UpperCorner>-64.17175398211259 81.10798380650193</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:buildings</Name><Title>Buildings</Title><Abstract>Residential buildings.</Abstract><ows:Keywords><ows:Keyword>buildings</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-143.5837779146903 15.284522077701567</ows:LowerCorner><ows:UpperCorner>-49.92219194285066 108.94610804954121</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:buildings_lz</Name><Title>Buildings</Title><Abstract>Non-residential buildings including supermarkets, places of worship, and railway stations.</Abstract><ows:Keywords><ows:Keyword>buildings-lz</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-127.056432967933 42.03578985948257</ows:LowerCorner><ows:UpperCorner>-52.696780484684545 62.464526783166164</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:placenames_capital</Name><Title>Capital Cities</Title><Abstract>Place names for capital cities and towns.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>placenames-capital</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-75.78001512155136 43.80583661319657</ows:LowerCorner><ows:UpperCorner>-71.14491815799657 48.44093357675134</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:usgs="http://www.usgs.gov/"><Name>usgs:tracts</Name><Title>Census Tracts</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>tracts</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4269</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-79.03635200000001 37.82855699908579</ows:LowerCorner><ows:UpperCorner>-75.766667 39.723004999072444</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:placenames_medium</Name><Title>Cities</Title><Abstract>Medium scale place names for cities and towns.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>placenames-medium</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-142.08564717162824 16.252503261180742</ows:LowerCorner><ows:UpperCorner>-50.05863220162538 108.27951823118359</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:processed_p</Name><Title>Coastlines</Title><Abstract>Coastlines.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>processed_p</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99999692067183 -85.0511</ows:LowerCorner><ows:UpperCorner>179.99999692067183 83.669333</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_admin_0_countries</Name><Title>Countries</Title><Abstract>The 247 countries in the world.</Abstract><ows:Keywords><ows:Keyword>ne_10m_admin_0_countries</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99978348919961 -89.99982838943765</ows:LowerCorner><ows:UpperCorner>180.0000000000001 83.63381093402974</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:placenames_large</Name><Title>Countries and States</Title><Abstract>Large scale place names for countries and states.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>placenames-large</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-137.61600008084343 15.884003750940868</ows:LowerCorner><ows:UpperCorner>-54.38400009242966 99.11600373935467</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_admin_0_boundary_lines_land</Name><Title>Country Boundary Lines</Title><Abstract>Country boundaries on land and offshore.</Abstract><ows:Keywords><ows:Keyword>ne_10m_admin_0_boundary_lines_land</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.00554866607172 -55.12092376716172</ows:LowerCorner><ows:UpperCorner>140.977626994236 70.07531036419849</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:landcover_line</Name><Title>Cutlines</Title><Abstract>Forest cut lines.</Abstract><ows:Keywords><ows:Keyword>landcover-line</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-140.89213782989833 42.70350246602303</ows:LowerCorner><ows:UpperCorner>-53.32558905631188 62.87396248005926</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:glaciers_text</Name><Title>Glaciers</Title><Abstract>Glacier names.</Abstract><ows:Keywords><ows:Keyword>glaciers-text</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-145.88166257107298 24.516514683744372</ows:LowerCorner><ows:UpperCorner>-62.73084090440301 107.66733635041437</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:highway_area_casing</Name><Title>Highway Casing</Title><Abstract>Highway case lines.</Abstract><ows:Keywords><ows:Keyword>highway-area-casing</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-130.17437189076335 8.665969089326937</ows:LowerCorner><ows:UpperCorner>-51.14576967800888 87.69457130208141</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:highway_area_fill</Name><Title>Highway Fill</Title><Abstract>Fill lines for highways.</Abstract><ows:Keywords><ows:Keyword>highway-area-fill</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-132.02264668045035 12.570772244474707</ows:LowerCorner><ows:UpperCorner>-51.10917376470593 93.48424516021913</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:ne_110m_admin_0_boundary_lines_land</Name><Title>Land Boundaries</Title><Abstract>Natural Earth 1:100m land boundary lines.</Abstract><ows:Keywords><ows:Keyword>ne_110m_admin_0_boundary_lines_land</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-140.99778 -54.89681</ows:LowerCorner><ows:UpperCorner>141.03385176001382 70.16419</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:landcover</Name><Title>Landcover</Title><Abstract>Area land cover features representing physical material of the earth such as grass, trees, and water.</Abstract><ows:Keywords><ows:Keyword>landcover</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.88540698889346 17.247948872661382</ows:LowerCorner><ows:UpperCorner>-51.739840183926034 107.39351567762881</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:landuse_overlay</Name><Title>Landuse</Title><Abstract>Human uses of land including military and nature reserves.</Abstract><ows:Keywords><ows:Keyword>landuse_overlay</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-140.80472062086648 17.776039631372797</ows:LowerCorner><ows:UpperCorner>-51.01044371233432 107.57031653990495</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:minor_roads_casing</Name><Title>Minor Road Casing</Title><Abstract>Minor road case lines.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>minor-roads-casing</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-143.7726511509436 15.617375968269798</ows:LowerCorner><ows:UpperCorner>-50.81877013238933 108.57125698682408</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:minor_roads_fill</Name><Title>Minor Road Fill</Title><Abstract>Fill lines for minor roads.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>minor-roads-fill</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-142.86136604984313 16.531648473350536</ows:LowerCorner><ows:UpperCorner>-51.72730944299234 107.66570508020133</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:admin_01234</Name><Title>National Administrative Boundaries</Title><Abstract>Administrative boundary levels 0 through 4 including national borders as well as provincial/state boundaries.</Abstract><ows:Keywords><ows:Keyword>admin-01234</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-159.32147990680195 -14.375312036755904</ows:LowerCorner><ows:UpperCorner>-5.145179072078968 139.80098879796705</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ocean</Name><Title>Ocean</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>ocean</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-180.0 -90.0</ows:LowerCorner><ows:UpperCorner>180.0 90.0</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:admin_other</Name><Title>Other Administrative Boundaries</Title><Abstract>Administrative boundary levels 9 and 10 including neighbourhoods.</Abstract><ows:Keywords><ows:Keyword>admin-other</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-148.8553913433354 7.029732194345316</ows:LowerCorner><ows:UpperCorner>-49.8349002882939 106.05022324938682</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:ne_10m_populated_places</Name><Title>Populated Places</Title><Abstract>Natural Earth 1:10m populated places.</Abstract><ows:Keywords><ows:Keyword>ne_10m_populated_places</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.58997888396897 -85.99999981438727</ows:LowerCorner><ows:UpperCorner>179.38330358817018 85.48332318035943</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_populated_places</Name><Title>Populated Places</Title><Abstract>City and town points, from Tokyo to Wasilla, Cairo to Kandahar.</Abstract><ows:Keywords><ows:Keyword>ne_10m_populated_places</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.58997888396897 -89.98289386134616</ows:LowerCorner><ows:UpperCorner>179.38330358817018 82.48332318035943</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:admin_5678</Name><Title>Regional Administrative Boundaries</Title><Abstract>Administrative boundary levels 5 through 8 including county and municipality boundaries.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>admin-5678</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.69082638450297 5.830431045209257</ows:LowerCorner><ows:UpperCorner>-50.047653533963526 97.4736038957487</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:water_lines_low_zoom</Name><Title>Rivers</Title><Abstract>Rivers.</Abstract><ows:Keywords><ows:Keyword>water-lines-low-zoom</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-146.90332970903142 10.442936193309261</ows:LowerCorner><ows:UpperCorner>-49.9084992337204 107.43776666862033</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:roads_text_name</Name><Title>Road Names</Title><Abstract>Road names.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>roads-text-name</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-154.87521535664226 41.42903496720788</ows:LowerCorner><ows:UpperCorner>-9.59144362223867 83.74912119648587</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:roads_text_ref</Name><Title>Road Reference Names</Title><Abstract>Reference names for highways, exists, routes, etc...</Abstract><ows:Keywords><ows:Keyword>roads-text-ref</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.46012695336117 41.71563548777632</ows:LowerCorner><ows:UpperCorner>-52.62469957645527 68.35281868895576</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:roads_text_ref_low_zoom</Name><Title>Road Reference Names Large</Title><Abstract>Large scale reference names for highways, exists, routes, etc...</Abstract><ows:Keywords><ows:Keyword>roads-text-ref-low-zoom</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-142.34848122713024 9.86281627018405</ows:LowerCorner><ows:UpperCorner>-51.73634530268621 100.47495219462806</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:roads</Name><Title>Roads</Title><Abstract>OpenStreetMap roads.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>roads</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.46012695336117 41.98494977585635</ows:LowerCorner><ows:UpperCorner>-52.62469957645527 73.06918899186422</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_roads</Name><Title>Roads</Title><Abstract>Basic roads from CEC North America Environmental Atlas.</Abstract><ows:Keywords><ows:Keyword>ne_10m_roads</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-166.53248206565988 7.997570932184107</ows:LowerCorner><ows:UpperCorner>-52.72651149202634 70.28700516674117</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_roads_north_america</Name><Title>Roads North America</Title><Abstract>Basic roads from CEC North America Environmental Atlas.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>ne_10m_roads_north_america</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-176.7640084731439 14.590750676565</ows:LowerCorner><ows:UpperCorner>-52.64725244187383 70.2966838677457</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:sports_grounds</Name><Title>Sporting Grounds</Title><Abstract>Sporting facilities such as stadiums, pitches, and tracks.</Abstract><ows:Keywords><ows:Keyword>sports-grounds</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-135.91844431626026 10.201953697436164</ows:LowerCorner><ows:UpperCorner>-51.86125374954411 94.25914426415231</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:ne="http://naturalearthdata.com"><Name>ne:ne_10m_admin_1_states_provinces_lines_shp</Name><Title>State Boundaries</Title><Abstract>Internal administrative boundaries.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>ne_10m_admin_1_states_provinces_lines_shp</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-139.04719194227846 -49.25074024841061</ows:LowerCorner><ows:UpperCorner>178.44862226797602 81.13822602001464</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:topp="http://www.openplans.org/topp"><Name>topp:tasmania_cities</Name><Title>Tasmania Cities</Title><Abstract>Cities in Tasmania.</Abstract><ows:Keywords><ows:Keyword>cities</ows:Keyword><ows:Keyword>Tasmania</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>145.19754 -43.423512</ows:LowerCorner><ows:UpperCorner>148.27298000000002 -40.852802</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:topp="http://www.openplans.org/topp"><Name>topp:tasmania_roads</Name><Title>Tasmania Roads</Title><Abstract>Primary Tasmania roads.</Abstract><ows:Keywords><ows:Keyword>Roads</ows:Keyword><ows:Keyword>Tasmania</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>145.19754 -43.423512</ows:LowerCorner><ows:UpperCorner>148.27298000000002 -40.852802</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:topp="http://www.openplans.org/topp"><Name>topp:tasmania_state_boundaries</Name><Title>Tasmania State Boundaries</Title><Abstract>Tasmania state boundaries.</Abstract><ows:Keywords><ows:Keyword>boundaries</ows:Keyword><ows:Keyword>tasmania_state_boundaries</ows:Keyword><ows:Keyword>Tasmania</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>143.83482400000003 -43.648056</ows:LowerCorner><ows:UpperCorner>148.47914100000003 -39.573891</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:topp="http://www.openplans.org/topp"><Name>topp:tasmania_water_bodies</Name><Title>Tasmania Water Bodies</Title><Abstract>Tasmania water bodies</Abstract><ows:Keywords><ows:Keyword>Lakes</ows:Keyword><ows:Keyword>Bodies</ows:Keyword><ows:Keyword>Australia</ows:Keyword><ows:Keyword>Water</ows:Keyword><ows:Keyword>Tasmania</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>145.97161899999998 -43.031944</ows:LowerCorner><ows:UpperCorner>147.219696 -41.775558</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:topp="http://www.openplans.org/topp"><Name>topp:states</Name><Title>USA Population</Title><Abstract>2000 census data for United States.</Abstract><ows:Keywords><ows:Keyword>census</ows:Keyword><ows:Keyword>united</ows:Keyword><ows:Keyword>boundaries</ows:Keyword><ows:Keyword>state</ows:Keyword><ows:Keyword>states</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-124.731422 24.955967</ows:LowerCorner><ows:UpperCorner>-66.969849 49.371735</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:builtup_area</Name><Title>Urban Areas</Title><Abstract>Urban or "built-up" regions.</Abstract><ows:Keywords><ows:Keyword>builtup_area</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:3395</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-186.35257994079592 -177.0967491760223</ows:LowerCorner><ows:UpperCorner>185.66622434997564 194.92205511474927</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:water_areas</Name><Title>Water Area</Title><Abstract>Area water features such as lakes, reservoir, and basins.</Abstract><ows:Keywords><ows:Keyword>water-areas</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-147.07158383562233 13.809201311813819</ows:LowerCorner><ows:UpperCorner>-49.82960582850109 111.05117931893506</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:water_lines_casing</Name><Title>Water Line Casing</Title><Abstract>Linear water feature case lines.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>water-lines-casing</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.88531564190714 17.366910566324016</ows:LowerCorner><ows:UpperCorner>-51.74896543856708 107.50326076966408</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:water_lines</Name><Title>Water Lines</Title><Abstract>Linear water features such as rivers, streams, and canals.</Abstract><ows:Keywords><ows:Keyword>water-lines</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-145.02084658633265 15.783622663693311</ows:LowerCorner><ows:UpperCorner>-51.717920577731185 109.08654867229478</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:water_areas_overlay</Name><Title>Wetlands</Title><Abstract>Wetlands and marshes.</Abstract><ows:Keywords><ows:Keyword>water-areas-overlay</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-141.8853258575486 17.286864351244645</ows:LowerCorner><ows:UpperCorner>-51.73518818187042 107.43700202692281</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:shoreline_300</Name><Title>World</Title><Abstract>World polygons.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>shoreline_300</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99999692067183 -85.0511</ows:LowerCorner><ows:UpperCorner>179.99999692067183 83.669333</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:og="http://opengeo.org"><Name>og:archsites</Name><Title>archsites</Title><Abstract/><ows:Keywords><ows:Keyword>archsites</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:26713</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-103.87237752497381 44.37731979707393</ows:LowerCorner><ows:UpperCorner>-103.63775627308381 44.48795905249415</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:og="http://opengeo.org"><Name>og:bugsites</Name><Title>bugsites</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>bugsites</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:26713</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-103.86777505973538 44.37385531006498</ows:LowerCorner><ows:UpperCorner>-103.63754963358517 44.43410452504683</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:landuse</Name><Title>landuse</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>landuse</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-73.5018458 41.2388357</ows:LowerCorner><ows:UpperCorner>-69.9372012 42.8857618</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:natural</Name><Title>natural</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>natural</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-73.520448 41.2451137</ows:LowerCorner><ows:UpperCorner>-69.9303583 42.889363</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_10m_lakes</Name><Title>ne_10m_lakes</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>ne_10m_lakes</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-165.96558168829336 -50.66966651748362</ows:LowerCorner><ows:UpperCorner>176.09377623426627 81.95520786930868</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_10m_land</Name><Title>ne_10m_land</Title><Abstract/><ows:Keywords><ows:Keyword>ne_10m_land</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99999999999994 -89.9999999999999</ows:LowerCorner><ows:UpperCorner>180.0000000000001 83.6341006530001</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_10m_ocean</Name><Title>ne_10m_ocean</Title><Abstract/><ows:Keywords><ows:Keyword>ne_10m_ocean</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99999999999994 -85.22193775799994</ows:LowerCorner><ows:UpperCorner>180.0000000000001 90.00000000000009</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_10m_wgs84_bounding_box</Name><Title>ne_10m_wgs84_bounding_box</Title><Abstract/><ows:Keywords><ows:Keyword>ne_10m_wgs84_bounding_box</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-180.0 -90.0</ows:LowerCorner><ows:UpperCorner>180.0 90.0</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_50m_admin_0_countries</Name><Title>ne_50m_admin_0_countries</Title><Abstract/><ows:Keywords><ows:Keyword>ne_50m_admin_0_countries</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-180.0 -89.99892578124998</ows:LowerCorner><ows:UpperCorner>180.00000000000003 83.59960937500006</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_50m_land</Name><Title>ne_50m_land</Title><Abstract/><ows:Keywords><ows:Keyword>ne_50m_land</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-180.0 -89.99892578125002</ows:LowerCorner><ows:UpperCorner>180.0 83.599609375</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:ne_50m_ocean</Name><Title>ne_50m_ocean</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>ne_50m_ocean</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:4326</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-179.99999999999997 -85.19218750000005</ows:LowerCorner><ows:UpperCorner>180.0 89.99999999999994</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:maps="http://boundlessgeo.com"><Name>maps:parks</Name><Title>parks</Title><Abstract/><ows:Keywords><ows:Keyword>parks</ows:Keyword><ows:Keyword>features</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-135.11385016961316 41.90665797346074</ows:LowerCorner><ows:UpperCorner>-52.688540508077914 62.466522471253434</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:osm="http://openstreemap.org"><Name>osm:placenames_small</Name><Title>placenames-small</Title><Abstract>Small scale place names for villages and suburbs.</Abstract><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>placenames-small</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:900913</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-142.99542442709497 15.645735005516036</ows:LowerCorner><ows:UpperCorner>-50.84851254592186 107.79264688668917</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:og="http://opengeo.org"><Name>og:restricted</Name><Title>restricted</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>restricted</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:26713</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-103.85038553527191 44.39428029161307</ows:LowerCorner><ows:UpperCorner>-103.74722910655954 44.48207378250366</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:og="http://opengeo.org"><Name>og:roads</Name><Title>roads</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>roads</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:26713</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-103.87779468316292 44.37288961726252</ows:LowerCorner><ows:UpperCorner>-103.62268570651278 44.50217396380937</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType><FeatureType xmlns:og="http://opengeo.org"><Name>og:streams</Name><Title>streams</Title><Abstract/><ows:Keywords><ows:Keyword>features</ows:Keyword><ows:Keyword>streams</ows:Keyword></ows:Keywords><DefaultSRS>urn:x-ogc:def:crs:EPSG:26713</DefaultSRS><ows:WGS84BoundingBox><ows:LowerCorner>-103.87770391362513 44.37225176183712</ows:LowerCorner><ows:UpperCorner>-103.62269239389168 44.50213471157199</ows:UpperCorner></ows:WGS84BoundingBox></FeatureType></FeatureTypeList><ogc:Filter_Capabilities><ogc:Spatial_Capabilities><ogc:GeometryOperands><ogc:GeometryOperand>gml:Envelope</ogc:GeometryOperand><ogc:GeometryOperand>gml:Point</ogc:GeometryOperand><ogc:GeometryOperand>gml:LineString</ogc:GeometryOperand><ogc:GeometryOperand>gml:Polygon</ogc:GeometryOperand></ogc:GeometryOperands><ogc:SpatialOperators><ogc:SpatialOperator name="Disjoint"/><ogc:SpatialOperator name="Equals"/><ogc:SpatialOperator name="DWithin"/><ogc:SpatialOperator name="Beyond"/><ogc:SpatialOperator name="Intersects"/><ogc:SpatialOperator name="Touches"/><ogc:SpatialOperator name="Crosses"/><ogc:SpatialOperator name="Within"/><ogc:SpatialOperator name="Contains"/><ogc:SpatialOperator name="Overlaps"/><ogc:SpatialOperator name="BBOX"/></ogc:SpatialOperators></ogc:Spatial_Capabilities><ogc:Scalar_Capabilities><ogc:LogicalOperators/><ogc:ComparisonOperators><ogc:ComparisonOperator>LessThan</ogc:ComparisonOperator><ogc:ComparisonOperator>GreaterThan</ogc:ComparisonOperator><ogc:ComparisonOperator>LessThanEqualTo</ogc:ComparisonOperator><ogc:ComparisonOperator>GreaterThanEqualTo</ogc:ComparisonOperator><ogc:ComparisonOperator>EqualTo</ogc:ComparisonOperator><ogc:ComparisonOperator>NotEqualTo</ogc:ComparisonOperator><ogc:ComparisonOperator>Like</ogc:ComparisonOperator><ogc:ComparisonOperator>Between</ogc:ComparisonOperator><ogc:ComparisonOperator>NullCheck</ogc:ComparisonOperator></ogc:ComparisonOperators><ogc:ArithmeticOperators><ogc:SimpleArithmetic/><ogc:Functions><ogc:FunctionNames><ogc:FunctionName nArgs="1">abs</ogc:FunctionName><ogc:FunctionName nArgs="1">abs_2</ogc:FunctionName><ogc:FunctionName nArgs="1">abs_3</ogc:FunctionName><ogc:FunctionName nArgs="1">abs_4</ogc:FunctionName><ogc:FunctionName nArgs="1">acos</ogc:FunctionName><ogc:FunctionName nArgs="2">AddCoverages</ogc:FunctionName><ogc:FunctionName nArgs="9">Affine</ogc:FunctionName><ogc:FunctionName nArgs="4">Aggregate</ogc:FunctionName><ogc:FunctionName nArgs="1">Area</ogc:FunctionName><ogc:FunctionName nArgs="1">area2</ogc:FunctionName><ogc:FunctionName nArgs="3">AreaGrid</ogc:FunctionName><ogc:FunctionName nArgs="1">asin</ogc:FunctionName><ogc:FunctionName nArgs="1">atan</ogc:FunctionName><ogc:FunctionName nArgs="2">atan2</ogc:FunctionName><ogc:FunctionName nArgs="4">BandMerge</ogc:FunctionName><ogc:FunctionName nArgs="3">BandSelect</ogc:FunctionName><ogc:FunctionName nArgs="14">BarnesSurface</ogc:FunctionName><ogc:FunctionName nArgs="3">between</ogc:FunctionName><ogc:FunctionName nArgs="1">boundary</ogc:FunctionName><ogc:FunctionName nArgs="1">boundaryDimension</ogc:FunctionName><ogc:FunctionName nArgs="1">Bounds</ogc:FunctionName><ogc:FunctionName nArgs="2">buffer</ogc:FunctionName><ogc:FunctionName nArgs="3">BufferFeatureCollection</ogc:FunctionName><ogc:FunctionName nArgs="3">bufferWithSegments</ogc:FunctionName><ogc:FunctionName nArgs="7">Categorize</ogc:FunctionName><ogc:FunctionName nArgs="1">ceil</ogc:FunctionName><ogc:FunctionName nArgs="1">centroid</ogc:FunctionName><ogc:FunctionName nArgs="2">classify</ogc:FunctionName><ogc:FunctionName nArgs="3">Clip</ogc:FunctionName><ogc:FunctionName nArgs="1">CollectGeometries</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Average</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Bounds</ogc:FunctionName><ogc:FunctionName nArgs="0">Collection_Count</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Max</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Median</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Min</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Nearest</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Sum</ogc:FunctionName><ogc:FunctionName nArgs="1">Collection_Unique</ogc:FunctionName><ogc:FunctionName nArgs="-2">Concatenate</ogc:FunctionName><ogc:FunctionName nArgs="2">contains</ogc:FunctionName><ogc:FunctionName nArgs="7">Contour</ogc:FunctionName><ogc:FunctionName nArgs="2">convert</ogc:FunctionName><ogc:FunctionName nArgs="1">convexHull</ogc:FunctionName><ogc:FunctionName nArgs="1">cos</ogc:FunctionName><ogc:FunctionName nArgs="1">Count</ogc:FunctionName><ogc:FunctionName nArgs="2">CropCoverage</ogc:FunctionName><ogc:FunctionName nArgs="2">crosses</ogc:FunctionName><ogc:FunctionName nArgs="2">dateFormat</ogc:FunctionName><ogc:FunctionName nArgs="2">dateParse</ogc:FunctionName><ogc:FunctionName nArgs="2">densify</ogc:FunctionName><ogc:FunctionName nArgs="2">difference</ogc:FunctionName><ogc:FunctionName nArgs="1">dimension</ogc:FunctionName><ogc:FunctionName nArgs="2">disjoint</ogc:FunctionName><ogc:FunctionName nArgs="2">disjoint3D</ogc:FunctionName><ogc:FunctionName nArgs="2">distance</ogc:FunctionName><ogc:FunctionName nArgs="2">distance3D</ogc:FunctionName><ogc:FunctionName nArgs="1">double2bool</ogc:FunctionName><ogc:FunctionName nArgs="1">endAngle</ogc:FunctionName><ogc:FunctionName nArgs="1">endPoint</ogc:FunctionName><ogc:FunctionName nArgs="1">env</ogc:FunctionName><ogc:FunctionName nArgs="1">envelope</ogc:FunctionName><ogc:FunctionName nArgs="2">EqualInterval</ogc:FunctionName><ogc:FunctionName nArgs="2">equalsExact</ogc:FunctionName><ogc:FunctionName nArgs="3">equalsExactTolerance</ogc:FunctionName><ogc:FunctionName nArgs="2">equalTo</ogc:FunctionName><ogc:FunctionName nArgs="1">exp</ogc:FunctionName><ogc:FunctionName nArgs="1">exteriorRing</ogc:FunctionName><ogc:FunctionName nArgs="3">Feature</ogc:FunctionName><ogc:FunctionName nArgs="1">floor</ogc:FunctionName><ogc:FunctionName nArgs="1">geometryType</ogc:FunctionName><ogc:FunctionName nArgs="1">geomFromWKT</ogc:FunctionName><ogc:FunctionName nArgs="1">geomLength</ogc:FunctionName><ogc:FunctionName nArgs="2">getGeometryN</ogc:FunctionName><ogc:FunctionName nArgs="1">getX</ogc:FunctionName><ogc:FunctionName nArgs="1">getY</ogc:FunctionName><ogc:FunctionName nArgs="1">getz</ogc:FunctionName><ogc:FunctionName nArgs="2">greaterEqualThan</ogc:FunctionName><ogc:FunctionName nArgs="2">greaterThan</ogc:FunctionName><ogc:FunctionName nArgs="5">Grid</ogc:FunctionName><ogc:FunctionName nArgs="7">Heatmap</ogc:FunctionName><ogc:FunctionName nArgs="0">id</ogc:FunctionName><ogc:FunctionName nArgs="2">IEEEremainder</ogc:FunctionName><ogc:FunctionName nArgs="3">if_then_else</ogc:FunctionName><ogc:FunctionName nArgs="11">in10</ogc:FunctionName><ogc:FunctionName nArgs="3">in2</ogc:FunctionName><ogc:FunctionName nArgs="4">in3</ogc:FunctionName><ogc:FunctionName nArgs="5">in4</ogc:FunctionName><ogc:FunctionName nArgs="6">in5</ogc:FunctionName><ogc:FunctionName nArgs="7">in6</ogc:FunctionName><ogc:FunctionName nArgs="8">in7</ogc:FunctionName><ogc:FunctionName nArgs="9">in8</ogc:FunctionName><ogc:FunctionName nArgs="10">in9</ogc:FunctionName><ogc:FunctionName nArgs="2">InclusionFeatureCollection</ogc:FunctionName><ogc:FunctionName nArgs="1">int2bbool</ogc:FunctionName><ogc:FunctionName nArgs="1">int2ddouble</ogc:FunctionName><ogc:FunctionName nArgs="1">interiorPoint</ogc:FunctionName><ogc:FunctionName nArgs="2">interiorRingN</ogc:FunctionName><ogc:FunctionName nArgs="-5">Interpolate</ogc:FunctionName><ogc:FunctionName nArgs="2">intersection</ogc:FunctionName><ogc:FunctionName nArgs="7">IntersectionFeatureCollection</ogc:FunctionName><ogc:FunctionName nArgs="2">intersects</ogc:FunctionName><ogc:FunctionName nArgs="2">intersects3D</ogc:FunctionName><ogc:FunctionName nArgs="1">isClosed</ogc:FunctionName><ogc:FunctionName nArgs="0">isCoverage</ogc:FunctionName><ogc:FunctionName nArgs="1">isEmpty</ogc:FunctionName><ogc:FunctionName nArgs="2">isLike</ogc:FunctionName><ogc:FunctionName nArgs="1">isNull</ogc:FunctionName><ogc:FunctionName nArgs="2">isometric</ogc:FunctionName><ogc:FunctionName nArgs="1">isRing</ogc:FunctionName><ogc:FunctionName nArgs="1">isSimple</ogc:FunctionName><ogc:FunctionName nArgs="1">isValid</ogc:FunctionName><ogc:FunctionName nArgs="3">isWithinDistance</ogc:FunctionName><ogc:FunctionName nArgs="3">isWithinDistance3D</ogc:FunctionName><ogc:FunctionName nArgs="2">Jenks</ogc:FunctionName><ogc:FunctionName nArgs="1">length</ogc:FunctionName><ogc:FunctionName nArgs="2">lessEqualThan</ogc:FunctionName><ogc:FunctionName nArgs="2">lessThan</ogc:FunctionName><ogc:FunctionName nArgs="-1">list</ogc:FunctionName><ogc:FunctionName nArgs="1">log</ogc:FunctionName><ogc:FunctionName nArgs="4">LRSGeocode</ogc:FunctionName><ogc:FunctionName nArgs="5">LRSMeasure</ogc:FunctionName><ogc:FunctionName nArgs="5">LRSSegment</ogc:FunctionName><ogc:FunctionName nArgs="2">max</ogc:FunctionName><ogc:FunctionName nArgs="2">max_2</ogc:FunctionName><ogc:FunctionName nArgs="2">max_3</ogc:FunctionName><ogc:FunctionName nArgs="2">max_4</ogc:FunctionName><ogc:FunctionName nArgs="2">min</ogc:FunctionName><ogc:FunctionName nArgs="2">min_2</ogc:FunctionName><ogc:FunctionName nArgs="2">min_3</ogc:FunctionName><ogc:FunctionName nArgs="2">min_4</ogc:FunctionName><ogc:FunctionName nArgs="1">mincircle</ogc:FunctionName><ogc:FunctionName nArgs="1">minimumdiameter</ogc:FunctionName><ogc:FunctionName nArgs="1">minrectangle</ogc:FunctionName><ogc:FunctionName nArgs="2">modulo</ogc:FunctionName><ogc:FunctionName nArgs="2">MultiplyCoverages</ogc:FunctionName><ogc:FunctionName nArgs="3">Nearest</ogc:FunctionName><ogc:FunctionName nArgs="1">not</ogc:FunctionName><ogc:FunctionName nArgs="2">notEqualTo</ogc:FunctionName><ogc:FunctionName nArgs="2">numberFormat</ogc:FunctionName><ogc:FunctionName nArgs="5">numberFormat2</ogc:FunctionName><ogc:FunctionName nArgs="1">numGeometries</ogc:FunctionName><ogc:FunctionName nArgs="1">numInteriorRing</ogc:FunctionName><ogc:FunctionName nArgs="1">numPoints</ogc:FunctionName><ogc:FunctionName nArgs="1">octagonalenvelope</ogc:FunctionName><ogc:FunctionName nArgs="3">offset</ogc:FunctionName><ogc:FunctionName nArgs="2">overlaps</ogc:FunctionName><ogc:FunctionName nArgs="-1">parameter</ogc:FunctionName><ogc:FunctionName nArgs="1">parseBoolean</ogc:FunctionName><ogc:FunctionName nArgs="1">parseDouble</ogc:FunctionName><ogc:FunctionName nArgs="1">parseInt</ogc:FunctionName><ogc:FunctionName nArgs="1">parseLong</ogc:FunctionName><ogc:FunctionName nArgs="0">pi</ogc:FunctionName><ogc:FunctionName nArgs="4">PointBuffers</ogc:FunctionName><ogc:FunctionName nArgs="2">pointN</ogc:FunctionName><ogc:FunctionName nArgs="7">PointStacker</ogc:FunctionName><ogc:FunctionName nArgs="6">PolygonExtraction</ogc:FunctionName><ogc:FunctionName nArgs="1">polygonize</ogc:FunctionName><ogc:FunctionName nArgs="2">pow</ogc:FunctionName><ogc:FunctionName nArgs="1">property</ogc:FunctionName><ogc:FunctionName nArgs="1">PropertyExists</ogc:FunctionName><ogc:FunctionName nArgs="2">Quantile</ogc:FunctionName><ogc:FunctionName nArgs="3">Query</ogc:FunctionName><ogc:FunctionName nArgs="0">random</ogc:FunctionName><ogc:FunctionName nArgs="5">RangeLookup</ogc:FunctionName><ogc:FunctionName nArgs="5">RasterAsPointCollection</ogc:FunctionName><ogc:FunctionName nArgs="4">RasterZonalStatistics</ogc:FunctionName><ogc:FunctionName nArgs="5">Recode</ogc:FunctionName><ogc:FunctionName nArgs="3">RectangularClip</ogc:FunctionName><ogc:FunctionName nArgs="2">relate</ogc:FunctionName><ogc:FunctionName nArgs="3">relatePattern</ogc:FunctionName><ogc:FunctionName nArgs="3">reproject</ogc:FunctionName><ogc:FunctionName nArgs="-3">rescaleToPixels</ogc:FunctionName><ogc:FunctionName nArgs="1">rint</ogc:FunctionName><ogc:FunctionName nArgs="1">round</ogc:FunctionName><ogc:FunctionName nArgs="1">round_2</ogc:FunctionName><ogc:FunctionName nArgs="1">roundDouble</ogc:FunctionName><ogc:FunctionName nArgs="6">ScaleCoverage</ogc:FunctionName><ogc:FunctionName nArgs="2">setCRS</ogc:FunctionName><ogc:FunctionName nArgs="2">simplify</ogc:FunctionName><ogc:FunctionName nArgs="1">sin</ogc:FunctionName><ogc:FunctionName nArgs="3">Snap</ogc:FunctionName><ogc:FunctionName nArgs="2">splitPolygon</ogc:FunctionName><ogc:FunctionName nArgs="1">sqrt</ogc:FunctionName><ogc:FunctionName nArgs="2">StandardDeviation</ogc:FunctionName><ogc:FunctionName nArgs="1">startAngle</ogc:FunctionName><ogc:FunctionName nArgs="1">startPoint</ogc:FunctionName><ogc:FunctionName nArgs="1">strCapitalize</ogc:FunctionName><ogc:FunctionName nArgs="2">strConcat</ogc:FunctionName><ogc:FunctionName nArgs="2">strEndsWith</ogc:FunctionName><ogc:FunctionName nArgs="2">strEqualsIgnoreCase</ogc:FunctionName><ogc:FunctionName nArgs="2">strIndexOf</ogc:FunctionName><ogc:FunctionName nArgs="4">stringTemplate</ogc:FunctionName><ogc:FunctionName nArgs="2">strLastIndexOf</ogc:FunctionName><ogc:FunctionName nArgs="1">strLength</ogc:FunctionName><ogc:FunctionName nArgs="2">strMatches</ogc:FunctionName><ogc:FunctionName nArgs="3">strPosition</ogc:FunctionName><ogc:FunctionName nArgs="4">strReplace</ogc:FunctionName><ogc:FunctionName nArgs="2">strStartsWith</ogc:FunctionName><ogc:FunctionName nArgs="3">strSubstring</ogc:FunctionName><ogc:FunctionName nArgs="2">strSubstringStart</ogc:FunctionName><ogc:FunctionName nArgs="1">strToLowerCase</ogc:FunctionName><ogc:FunctionName nArgs="1">strToUpperCase</ogc:FunctionName><ogc:FunctionName nArgs="1">strTrim</ogc:FunctionName><ogc:FunctionName nArgs="3">strTrim2</ogc:FunctionName><ogc:FunctionName nArgs="2">StyleCoverage</ogc:FunctionName><ogc:FunctionName nArgs="2">symDifference</ogc:FunctionName><ogc:FunctionName nArgs="1">tan</ogc:FunctionName><ogc:FunctionName nArgs="1">toDegrees</ogc:FunctionName><ogc:FunctionName nArgs="1">toRadians</ogc:FunctionName><ogc:FunctionName nArgs="2">touches</ogc:FunctionName><ogc:FunctionName nArgs="1">toWKT</ogc:FunctionName><ogc:FunctionName nArgs="2">Transform</ogc:FunctionName><ogc:FunctionName nArgs="2">union</ogc:FunctionName><ogc:FunctionName nArgs="2">UnionFeatureCollection</ogc:FunctionName><ogc:FunctionName nArgs="2">Unique</ogc:FunctionName><ogc:FunctionName nArgs="2">UniqueInterval</ogc:FunctionName><ogc:FunctionName nArgs="6">VectorToRaster</ogc:FunctionName><ogc:FunctionName nArgs="3">VectorZonalStatistics</ogc:FunctionName><ogc:FunctionName nArgs="1">vertices</ogc:FunctionName><ogc:FunctionName nArgs="2">within</ogc:FunctionName></ogc:FunctionNames></ogc:Functions></ogc:ArithmeticOperators></ogc:Scalar_Capabilities><ogc:Id_Capabilities><ogc:FID/><ogc:EID/></ogc:Id_Capabilities></ogc:Filter_Capabilities></wfs:WFS_Capabilities>'
        );
        describeFeatureHandler = $httpBackend.when(
            'POST',
            '/proxy/pz-gateway.int.geointservices.io/data/query',
            {
                "query": {"match_all": {}},
                "size" : 1,
                "from" : 0
            }
        ).respond(
            {
                "type": "data-list",
                "data": [
                    {
                        "dataId": "a02cfb35-15cb-4c3c-8192-90e385e1d0d5",
                        "dataType": {
                            "type": "raster",
                            "location": {
                                "type": "s3",
                                "bucketName": "external-public-access-test",
                                "fileName": "elevation.tif",
                                "fileSize": 90074,
                                "domainName": "s3.amazonaws.com"
                            },
                            "mimeType": null
                        },
                        "spatialMetadata": {
                            "coordinateReferenceSystem": "PROJCS[\"WGS 84 / UTM zone 32N\", \n  GEOGCS[\"WGS 84\", \n    DATUM[\"World Geodetic System 1984\", \n      SPHEROID[\"WGS 84\", 6378137.0, 298.257223563, AUTHORITY[\"EPSG\",\"7030\"]], \n      AUTHORITY[\"EPSG\",\"6326\"]], \n    PRIMEM[\"Greenwich\", 0.0, AUTHORITY[\"EPSG\",\"8901\"]], \n    UNIT[\"degree\", 0.017453292519943295], \n    AXIS[\"Geodetic latitude\", NORTH], \n    AXIS[\"Geodetic longitude\", EAST], \n    AUTHORITY[\"EPSG\",\"4326\"]], \n  PROJECTION[\"Transverse_Mercator\", AUTHORITY[\"EPSG\",\"9807\"]], \n  PARAMETER[\"central_meridian\", 9.0], \n  PARAMETER[\"latitude_of_origin\", 0.0], \n  PARAMETER[\"scale_factor\", 0.9996], \n  PARAMETER[\"false_easting\", 500000.0], \n  PARAMETER[\"false_northing\", 0.0], \n  UNIT[\"m\", 1.0], \n  AXIS[\"Easting\", EAST], \n  AXIS[\"Northing\", NORTH], \n  AUTHORITY[\"EPSG\",\"32632\"]]",
                            "epsgCode": 32632,
                            "minX": 496147.97,
                            "minY": 5422119.88,
                            "maxX": 496545.97,
                            "maxY": 5422343.88,
                            "projectedSpatialMetadata": {
                                "epsgCode": 4326,
                                "minX": 48.951988079329226,
                                "minY": 8.947383721057443,
                                "maxX": 48.95400546464395,
                                "maxY": 8.952822045838397
                            }
                        },
                        "metadata": {
                            "name": "My Test raster external file",
                            "description": "This is a test.",
                            "format": null,
                            "qos": null,
                            "statusType": null,
                            "availability": null,
                            "tags": null,
                            "classType": {
                                "classification": "unclassified"
                            },
                            "clientCertRequired": null,
                            "credentialsRequired": null,
                            "preAuthRequired": null,
                            "networkAvailable": null,
                            "contacts": null,
                            "reason": null,
                            "version": null,
                            "createdBy": "citester",
                            "createdOn": "2016-10-07T19:05:04.562Z",
                            "createdByJobId": "4de54a37-0acd-495e-868c-d767e7c4d484",
                            "metadata": null,
                            "numericKeyValueList": null,
                            "textKeyValueList": null
                        }
                    }
                ]
            }
        );
        getFeatureHandler = $httpBackend.when(
            'GET',
            '/proxy?url=pz-search-query.int.geointservices.io/indexID/typeID/documentID'
        ).respond(
            {
                "_source": {}
            }
        );
        manualWfsHandler = $httpBackend.when(
            'POST',
            '/proxy?url=pz-search-query.int.geointservices.io/indexID/typeID/documentID/_update',
            {
                "doc": {
                    "keywords": ["tag1"]
                }
            }
        ).respond(
            {}
        );
        loginHandler = $httpBackend.when(
            'GET',
            '/login.html').respond({});
        WmsController = $controller('WmsController', {
            $scope: scope
        });
    }));

    afterEach(function() {
        $httpBackend.verifyNoOutstandingExpectation();
        $httpBackend.verifyNoOutstandingRequest();
    });

    it('should get the capabilities', function () {
        scope.endPoint = 'geoserver.piazzageo.io/geoserver/ows';
        scope.getCapabilities();
        //$httpBackend.expectGET('/uproxy/geoserver.piazzageo.io/geoserver/ows?service=WFS&version=1.1.0&request=GetCapabilities');
        $httpBackend.flush();
        // TODO: Fix this
        expect(scope.showLayerSelect).toBe(false);
    });

    it('should update map', function () {
        scope.selectedLayer = {
            Name: "topp:states",
            BoundingBox: [
                {
                    "extent": [1,2,3,4]
                }
            ]
        };
        scope.updateMap();
        $httpBackend.flush();
        expect(scope.center.lat).toBe(3);
        expect(scope.center.lon).toBe(2);
    });

});
